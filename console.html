<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>friscic.com</title>
    <style>
        body {
            font-family: monospace;
            background-color: black;
            color: #41FF00;
        }

        .terminal {
            line-height: 32px;
            padding: 5px;
            display: flex;
            flex-direction: column;
        }

        .line {
            line-height: 2em;
            display: flex;
        }

        .cursor {
            width: 10px;
            height: 25px;
            animation: blinker 1s linear infinite;
            background-color: #41FF00;
        }

        @keyframes blinker {
            50% {
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <div id="terminal">
        <div id="intro">
            <div class="line">http://friscic.com <span>【ツ】hi</span></div>
        </div>
        <div id="lines"></div>

        <div class="line" contenteditable="true">>&nbsp;<span id="input"></span><span class="cursor"></span></div>
    </div>
    <script>
        const lines = document.getElementById("lines");
        const terminal = document.getElementById("terminal");
        const input = document.getElementById("input");

        document.addEventListener('keydown', onKeyPress);

        function onKeyPress(e) {
            let keyboardInput = input.innerHTML;

            switch (e.keyCode) {
                /* space */
                case 32: {
                    input.innerHTML += '&nbsp;';
                    break;
                }
                /* Backspace */
                case 8: {
                    input.innerText = keyboardInput.replace('&nbsp;', ' ');
                    input = input.slice(0, -1);
                    keyboardInput = input.replace(' ', '&nbsp;');

                    input.innerHTML = '';
                    break;
                }
                /* Enter */
                case 13: {
                    const save = document.createElement("div");
                    save.innerHTML = input.innerHTML;
                    // `<div class="line">${input.outerText}</div>`;
                    // lines.push(`<div class="line">${input}</div>`);
                    lines.append(save);
                    // console.log(terminal.innerHTML);
                    input.innerHTML = '';
                    break;
                }
                default:
                    if (e.keyCode < 48 || e.keyCode > 90) {
                        return;
                    }
                    input.innerHTML += e.key;
                    break;
            }

            // input.innerHTML = keyboardInput;
        }

        function greeting() {
            const date = new Date;
            let hours = date.getHours();
            let status = (hours < 12)
                ? "morning" :
                ((hours <= 18 && hours >= 12)
                    ? "afternoon"
                    : "night");

            return status;
        }
    </script>
</body>

</html>